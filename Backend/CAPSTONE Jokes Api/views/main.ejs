<!DOCTYPE html>
<html lang="en" data-bs-theme="dark">
<head>
    <meta charset="UTF-8">
    <title>Jokes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="styles/index.css">

</head>
<body>
<form class="container" action="/" method="post">

    <div class="row mb-3">
        <label for="category" class="col-sm-2 col-form-label">Select Category</label>
        <div class="col-sm-10" id="category">
            <div class="row">
                <div class="form-check ">
                    <input class="form-check-input" type="radio" name="category-chk" value="any" id="any"
                           onchange="handlecheckbox()">
                    <label class="form-check-label" for="any">Any</label>
                </div>
                <div class="form-check ">
                    <input class="form-check-input" type="radio" name="category-chk" value="custom" id="custom"
                           onchange="handlecheckbox()" checked>
                    <label class="form-check-label" for="custom">
                        Custom
                    </label>
                </div>
                <div class="form-check col custom">
                    <input class="form-check-input custom" type="checkbox" name="category" value="misc" id="misc"
                           onchange="handlecheckbox()">
                    <label class="form-check-label" for="misc">
                        Misc
                    </label>
                </div>
                <div class="form-check col custom">
                    <input class="form-check-input custom" type="checkbox" name="category" value="programming"
                           id="programming" onchange="handlecheckbox()">
                    <label class="form-check-label" for="programming">
                        Programming
                    </label>
                </div>
                <div class="form-check col custom">
                    <input class="form-check-input custom" type="checkbox" name="category" value="dark" id="dark"
                           onchange="handlecheckbox()">
                    <label class="form-check-label" for="dark">
                        Dark
                    </label>
                </div>
                <div class="form-check col custom">
                    <input class="form-check-input custom" type="checkbox" name="category" value="pun" id="pun"
                           onchange="handlecheckbox()">
                    <label class="form-check-label" for="pun">
                        Pun
                    </label>
                </div>
                <div class="form-check col custom">
                    <input class="form-check-input custom" type="checkbox" name="category" value="spooky" id="spooky"
                           onchange="handlecheckbox()">
                    <label class="form-check-label" for="spooky">
                        Spooky
                    </label>
                </div>
                <div class="form-check col custom">
                    <input class="form-check-input custom" type="checkbox" name="category" value="christmas"
                           id="christmas" onchange="handlecheckbox()">
                    <label class="form-check-label" for="christmas">
                        Christmas
                    </label>
                </div>
            </div>
        </div>
    </div>
    <hr>
    <div class="row mb-3">
        <label for="language" class="col-sm-2 col-form-label">Select Language</label>
        <div class="col-sm-10" id="language">
            <div class="dropdown">
                <select class="btn btn-primary dropdown-toggle" name="language" id="dropdownMenuButton"
                        data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                    <option value="en">English</option>
                    <option value="cz">Czech</option>
                    <option value="de">German</option>
                    <option value="es">Spanish</option>
                    <option value="fi">French</option>
                    <option value="pt">Portuguese</option>
                </select>
            </div>
        </div>
    </div>
    <hr>
    <div class="row mb-3">
        <label for="flags" class="col-sm-2 col-form-label">FLags</label>
        <div class="col-sm-10" id="flags">
            <div class="row">
                <div class="form-check col">
                    <input class="form-check-input" name="flags" type="checkbox" value="nsfw" id="nsfw">
                    <label class="form-check-label" for="flexCheckDefault">
                        NSFW
                    </label>
                </div>
                <div class="form-check col">
                    <input class="form-check-input" name="flags" type="checkbox" value="religious" id="religious">
                    <label class="form-check-label" for="flexCheckChecked">
                        Religious
                    </label>
                </div>
                <div class="form-check col">
                    <input class="form-check-input" name="flags" type="checkbox" value="political" id="political">
                    <label class="form-check-label" for="flexCheckDefault">
                        Political
                    </label>
                </div>
                <div class="form-check col">
                    <input class="form-check-input" name="flags" type="checkbox" value="racist" id="racist">
                    <label class="form-check-label" for="flexCheckChecked">
                        Racist
                    </label>
                </div>
                <div class="form-check col">
                    <input class="form-check-input" name="flags" type="checkbox" value="sexist" id="sexist">
                    <label class="form-check-label" for="flexCheckDefault">
                        Sexist
                    </label>
                </div>
                <div class="form-check col">
                    <input class="form-check-input" name="flags" type="checkbox" value="explicit" id="explicit">
                    <label class="form-check-label" for="flexCheckChecked">
                        Explicit
                    </label>
                </div>
            </div>
        </div>
    </div>

    <hr>

    <div class="row mb-3">
        <label for="jokeType" class="col-sm-2 col-form-label">Joke Type</label>
        <div class="col-sm-10" id="jokeType">
            <div class="row">
                <div class="form-check col-2">
                    <input class="form-check-input" type="checkbox" name="jokeType" value="single" id="single">
                    <label class="form-check-label" for="flexCheckDefault">
                        Single
                    </label>
                </div>
                <div class="form-check col-2">
                    <input class="form-check-input" type="checkbox" name="jokeType" value="twopart" id="twopart">
                    <label class="form-check-label" for="flexCheckChecked">
                        Two Part
                    </label>
                </div>
            </div>
        </div>
    </div>
    <hr>
    <div class="row mb-3">
        <label for="amount" class="col-sm-2 col-form-label">Amount (max 10)</label>
        <div class="col-sm-10">
            <div class="form-outline">
                <input type="number" name="amount" id="amount" class="form-control" value="1" min="1" max="10"/>
            </div>
        </div>
    </div>
    <hr>
    <button type="submit" id="submit" class="btn btn-success">Submit</button>
</form>

<div class="container">
    <%- joke %>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.0/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
<script>
    function handlecheckbox() {
        let radio = document.querySelector('input[name="category-chk"]:checked').value;
        let checkboxes = document.querySelectorAll('.custom input[type="checkbox"]');

        checkboxes.forEach((checkbox) => {
            if (radio === 'any') {
                checkbox.disabled = true;
            } else {
                checkbox.disabled = false;
            }
        })

        let checkboxes_checked = document.querySelectorAll('.custom input[type="checkbox"]:checked');
        if (radio === 'custom') {
            if (checkboxes_checked.length === 0) {
                $('#submit').prop('disabled', true);
            } else {
                $('#submit').prop('disabled', false)
            }
        } else {
            $('#submit').prop('disabled', false)
        }
    }

</script>
</body>
</html>